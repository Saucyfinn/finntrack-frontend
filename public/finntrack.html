<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FinnTrack – Live & Replay</title>

  <link rel="stylesheet" href="/viewer.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script defer src="/viewer.js"></script>
</head>

<body>
<div id="map"></div>

<div id="controls">
  <button id="modeBtn">Switch to Replay</button>

  <button id="playBtn" class="replayOnly">▶</button>
  <button id="pauseBtn" class="replayOnly">⏸</button>
  <button id="stepBtn" class="replayOnly">Step →</button>

  <label class="replayOnly">
    Replay Speed:
    <select id="speedSelect">
      <option value="0.25">0.25×</option>
      <option value="0.5">0.5×</option>
      <option value="1" selected>1×</option>
      <option value="2">2×</option>
      <option value="4">4×</option>
    </select>
  </label>

  <label class="replayOnly">
    Frame:
    <input id="slider" type="range" min="0" max="0" value="0">
  </label>

  <span id="frameInfo" class="replayOnly">0/0</span>
</div>

<div id="layerPanel">
  <b>Course Features</b><br>
  <label><input type="checkbox" id="toggleStart" checked> Start Line</label><br>
  <label><input type="checkbox" id="toggleFinish" checked> Finish Line</label><br>
  <label><input type="checkbox" id="toggleMarks" checked> Marks</label><br>
  <label><input type="checkbox" id="togglePoly" checked> Course Area</label><br>
</div>

<div id="windArrow" style="display:none;">
  <img id="windImg" src="assets/arrow-light.svg" alt="Wind">
</div>

<div id="boatPanel"></div>

<div id="raceSelector">
  <b>Races</b><br>
  <select id="raceList"></select>
  <button id="loadRaceBtn">Load</button>
  <br><br>
  <a href="/join.html" id="joinLink">Join from this device</a>
</div>

<div id="exportPanel">
  <button id="exportGPX">Export GPX</button>
  <button id="exportKML">Export KML</button>
</div>

</body>
</html>
